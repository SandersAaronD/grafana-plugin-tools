"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[273],{876:(e,n,t)=>{t.d(n,{Zo:()=>p,kt:()=>f});var a=t(2784);function r(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function o(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function i(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?o(Object(t),!0).forEach((function(n){r(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):o(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function l(e,n){if(null==e)return{};var t,a,r=function(e,n){if(null==e)return{};var t,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)t=o[a],n.indexOf(t)>=0||(r[t]=e[t]);return r}(e,n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)t=o[a],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(r[t]=e[t])}return r}var s=a.createContext({}),c=function(e){var n=a.useContext(s),t=n;return e&&(t="function"==typeof e?e(n):i(i({},n),e)),t},p=function(e){var n=c(e.components);return a.createElement(s.Provider,{value:n},e.children)},d="mdxType",u={inlineCode:"code",wrapper:function(e){var n=e.children;return a.createElement(a.Fragment,{},n)}},m=a.forwardRef((function(e,n){var t=e.components,r=e.mdxType,o=e.originalType,s=e.parentName,p=l(e,["components","mdxType","originalType","parentName"]),d=c(t),m=r,f=d["".concat(s,".").concat(m)]||d[m]||u[m]||o;return t?a.createElement(f,i(i({ref:n},p),{},{components:t})):a.createElement(f,i({ref:n},p))}));function f(e,n){var t=arguments,r=n&&n.mdxType;if("string"==typeof e||r){var o=t.length,i=new Array(o);i[0]=m;var l={};for(var s in n)hasOwnProperty.call(n,s)&&(l[s]=n[s]);l.originalType=e,l[d]="string"==typeof e?e:r,i[1]=l;for(var c=2;c<o;c++)i[c]=t[c];return a.createElement.apply(null,i)}return a.createElement.apply(null,t)}m.displayName="MDXCreateElement"},4304:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>s,contentTitle:()=>i,default:()=>g,frontMatter:()=>o,metadata:()=>l,toc:()=>c});var a=t(7896),r=(t(2784),t(876));const o={id:"docker",title:"Docker Development Environment"},i=void 0,l={unversionedId:"docker",id:"docker",title:"Docker Development Environment",description:"@grafana/create-plugin includes a development environment that uses Docker to start an instance of the Grafana application for plugin developers to code against.",source:"@site/../docs/docker.mdx",sourceDirName:".",slug:"/docker",permalink:"/plugin-tools/docs/docker",draft:!1,editUrl:"https://github.com/grafana/plugin-tools/edit/main/docusaurus/website/../docs/docker.mdx",tags:[],version:"current",frontMatter:{id:"docker",title:"Docker Development Environment"},sidebar:"docs",previous:{title:"Backend",permalink:"/plugin-tools/docs/backend"},next:{title:"Continuous Integration",permalink:"/plugin-tools/docs/ci"}},s={},c=[{value:"Configure the Grafana version",id:"configure-the-grafana-version",level:3},{value:"Configure the Grafana image",id:"configure-the-grafana-image",level:3}],p=e=>function(n){return console.warn("Component "+e+" was not imported, exported, or provided by MDXProvider as global scope"),(0,r.kt)("div",n)},d=p("SyncCommand"),u=p("CodeSnippets"),m={toc:c},f="wrapper";function g(e){let{components:n,...t}=e;return(0,r.kt)(f,(0,a.Z)({},m,t,{components:n,mdxType:"MDXLayout"}),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"@grafana/create-plugin")," includes a development environment that uses Docker to start an instance of the Grafana application for plugin developers to code against."),(0,r.kt)("admonition",{type:"info"},(0,r.kt)("p",{parentName:"admonition"},(0,r.kt)("a",{parentName:"p",href:"https://docs.docker.com/get-docker/"},"Docker")," simplifies the process of creating, deploying, and running applications. It is useful for development as it allows the creation of consistent and isolated environments for applications. This makes it easy to manage dependencies and ensure that the application runs the same way across different machines.")),(0,r.kt)("p",null,"The Docker container is configured with the necessary variables to allow easy access to grafana and to load plugins without the need for them to be signed. It also adds a live reload feature allowing frontend changes to trigger browser refreshes whenever the frontend code changes."),(0,r.kt)("p",null,"To get started run the following commands in the order listed:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)(d,{cmd:"install",mdxType:"SyncCommand"}),": Install frontend dependencies."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)(d,{cmd:"run dev",mdxType:"SyncCommand"}),": Build and watch the plugin frontend code."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"mage -v build:linux"),": Build the plugin backend code. This command must be rerun every time you edit your backend files."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)(d,{cmd:"run server",mdxType:"SyncCommand"}),": Start a grafana development server running on [http://localhost:3000](http://localhost:3000). Restart this command each time you run `mage` to run your new backend code.")),(0,r.kt)("h3",{id:"configure-the-grafana-version"},"Configure the Grafana version"),(0,r.kt)("p",null,"You can use the environment variable ",(0,r.kt)("inlineCode",{parentName:"p"},"GRAFANA_VERSION")," to set the Grafana version whilst developing the plugin. This is useful for testing a plugin across different versions of Grafana."),(0,r.kt)(u,{paths:["docker-grafana-version.npm.shell.md","docker-grafana-version.pnpm.shell.md","docker-grafana-version.yarn.shell.md"],groupId:"package-manager",queryString:"current-package-manager",mdxType:"CodeSnippets"}),(0,r.kt)("h3",{id:"configure-the-grafana-image"},"Configure the Grafana image"),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"grafana-enterprise")," is the default Docker image. To override this image alter the ",(0,r.kt)("inlineCode",{parentName:"p"},"docker-compose.yaml")," adding the following build arg ",(0,r.kt)("inlineCode",{parentName:"p"},"grafana_image"),"."),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Example:")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-yaml"},"version: '3.7'\n\nservices:\n  grafana:\n    container_name: 'myorg-basic-app'\n    build:\n      context: ./.config\n      args:\n        grafana_version: ${GRAFANA_VERSION:-9.1.2}\n        grafana_image: ${GRAFANA_IMAGE:-grafana}\n")),(0,r.kt)("p",null,"This example assigns the environment variable ",(0,r.kt)("inlineCode",{parentName:"p"},"GRAFANA_IMAGE")," to the build arg ",(0,r.kt)("inlineCode",{parentName:"p"},"grafana_image")," with a default value of ",(0,r.kt)("inlineCode",{parentName:"p"},"grafana"),". This gives you the possibility to set the value when running ",(0,r.kt)("inlineCode",{parentName:"p"},"docker-compose")," commands."))}g.isMDXComponent=!0}}]);