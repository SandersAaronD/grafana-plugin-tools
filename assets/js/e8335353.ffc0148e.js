"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[139],{876:(e,t,n)=>{n.d(t,{Zo:()=>u,kt:()=>g});var o=n(2784);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,o,i=function(e,t){if(null==e)return{};var n,o,i={},r=Object.keys(e);for(o=0;o<r.length;o++)n=r[o],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(o=0;o<r.length;o++)n=r[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var p=o.createContext({}),s=function(e){var t=o.useContext(p),n=t;return e&&(n="function"==typeof e?e(t):a(a({},t),e)),n},u=function(e){var t=s(e.components);return o.createElement(p.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return o.createElement(o.Fragment,{},t)}},c=o.forwardRef((function(e,t){var n=e.components,i=e.mdxType,r=e.originalType,p=e.parentName,u=l(e,["components","mdxType","originalType","parentName"]),c=s(n),g=i,m=c["".concat(p,".").concat(g)]||c[g]||d[g]||r;return n?o.createElement(m,a(a({ref:t},u),{},{components:n})):o.createElement(m,a({ref:t},u))}));function g(e,t){var n=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var r=n.length,a=new Array(r);a[0]=c;var l={};for(var p in t)hasOwnProperty.call(t,p)&&(l[p]=t[p]);l.originalType=e,l.mdxType="string"==typeof e?e:i,a[1]=l;for(var s=2;s<r;s++)a[s]=n[s];return o.createElement.apply(null,a)}return o.createElement.apply(null,n)}c.displayName="MDXCreateElement"},8021:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>p,contentTitle:()=>a,default:()=>d,frontMatter:()=>r,metadata:()=>l,toc:()=>s});var o=n(7896),i=(n(2784),n(876));const r={id:"migrating-from-toolkit",title:"Migrating from Grafana Toolkit"},a=void 0,l={unversionedId:"migrating-from-toolkit",id:"migrating-from-toolkit",title:"Migrating from Grafana Toolkit",description:"If you are using @grafana/toolkit to scaffold and develop plugins this guide will help you make the jump to plugin tools.",source:"@site/../docs/migrating-from-toolkit.md",sourceDirName:".",slug:"/migrating-from-toolkit",permalink:"/plugin-tools/docs/migrating-from-toolkit",draft:!1,editUrl:"https://github.com/grafana/plugin-tools/edit/main/docusaurus/website/../docs/migrating-from-toolkit.md",tags:[],version:"current",frontMatter:{id:"migrating-from-toolkit",title:"Migrating from Grafana Toolkit"},sidebar:"docs",previous:{title:"Updating to New Releases",permalink:"/plugin-tools/docs/updating-to-new-releases"},next:{title:"Frontend",permalink:"/plugin-tools/docs/frontend"}},p={},s=[{value:"Why migrate?",id:"why-migrate",level:2},{value:"Migrate your plugin to create-plugin",id:"migrate-your-plugin-to-create-plugin",level:2},{value:"Prompts",id:"prompts",level:2},{value:"The following files will be overriden. Would you like to continue?",id:"the-following-files-will-be-overriden-would-you-like-to-continue",level:3},{value:"The following files are required. Can we scaffold them for you?",id:"the-following-files-are-required-can-we-scaffold-them-for-you",level:3},{value:"The following files are possibly not needed anymore. Are you ok with us removing them?",id:"the-following-files-are-possibly-not-needed-anymore-are-you-ok-with-us-removing-them",level:3},{value:"Would you like to update the following dependencies in the package.json?",id:"would-you-like-to-update-the-following-dependencies-in-the-packagejson",level:3},{value:"Would you like to remove the following possibly unnecessary NPM dependencies?",id:"would-you-like-to-remove-the-following-possibly-unnecessary-npm-dependencies",level:3},{value:"Would you like to update the scripts in your package.json? All scripts using grafana-toolkit will be replaced.",id:"would-you-like-to-update-the-scripts-in-your-packagejson-all-scripts-using-grafana-toolkit-will-be-replaced",level:3},{value:"Next steps",id:"next-steps",level:2}],u={toc:s};function d(e){let{components:t,...n}=e;return(0,i.kt)("wrapper",(0,o.Z)({},u,n,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("p",null,"If you are using ",(0,i.kt)("inlineCode",{parentName:"p"},"@grafana/toolkit")," to scaffold and develop plugins this guide will help you make the jump to plugin tools."),(0,i.kt)("admonition",{type:"caution"},(0,i.kt)("p",{parentName:"admonition"},"We ",(0,i.kt)("a",{parentName:"p",href:"https://grafana.com/docs/grafana/latest/developers/angular_deprecation/"},"do not support")," plugins written in Angular.")),(0,i.kt)("h2",{id:"why-migrate"},"Why migrate?"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"More flexible:")," With @grafana/create-plugin, developers have more control over their plugins, its dependencies, and can more easily customize the tooling to fit their specific needs."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"Faster development time:")," With its out-of-the-box development environment @grafana/create-plugin can significantly reduce development time compared to using @grafana/toolkit."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"Improved testing capabilities:")," Testing plugins with @grafana/create-plugin is much easier with github workflows that automate  unit and e2e test runs whenever changes are pushed to github."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"Better documentation:")," The documentation for @grafana/create-plugin is more comprehensive and easier to discover than @grafana/toolkit.")),(0,i.kt)("admonition",{type:"warning"},(0,i.kt)("p",{parentName:"admonition"},"Before running the following command we strongly suggest backing up the code. Ideally, store the plugin code in a Git repository and run the command on a clean branch to easily identify changes made by the migration command.")),(0,i.kt)("h2",{id:"migrate-your-plugin-to-create-plugin"},"Migrate your plugin to create-plugin"),(0,i.kt)("p",null,"To get started, in the root directory of the existing plugin (where the ",(0,i.kt)("inlineCode",{parentName:"p"},"package.json")," file is) run the following command and answer the prompts."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"npx @grafana/create-plugin migrate\n")),(0,i.kt)("h2",{id:"prompts"},"Prompts"),(0,i.kt)("p",null,"When running the migrate command the following prompts will appear asking for confirmation before making changes. Due to their destructive nature the default for each of the following prompts is ",(0,i.kt)("inlineCode",{parentName:"p"},"no"),"."),(0,i.kt)("h3",{id:"the-following-files-will-be-overriden-would-you-like-to-continue"},"The following files will be overriden. Would you like to continue?"),(0,i.kt)("p",null,"Selecting ",(0,i.kt)("inlineCode",{parentName:"p"},"y")," will create/replace the following files/folders in the plugin directory:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"myplugin-directory/\n\u251c\u2500\u2500 .config/\n\u251c\u2500\u2500 .eslintrc\n\u251c\u2500\u2500 .nvmrc\n\u251c\u2500\u2500 .prettierrc.js\n\u251c\u2500\u2500 docker-compose.yaml\n\u251c\u2500\u2500 jest-setup.js\n\u251c\u2500\u2500 jest.config.js\n\u2514\u2500\u2500 tsconfig.json\n")),(0,i.kt)("h3",{id:"the-following-files-are-required-can-we-scaffold-them-for-you"},"The following files are required. Can we scaffold them for you?"),(0,i.kt)("p",null,"Selecting ",(0,i.kt)("inlineCode",{parentName:"p"},"y")," will make sure a ",(0,i.kt)("inlineCode",{parentName:"p"},"CHANGELOG.md")," file exists in the plugin directory."),(0,i.kt)("h3",{id:"the-following-files-are-possibly-not-needed-anymore-are-you-ok-with-us-removing-them"},"The following files are possibly not needed anymore. Are you ok with us removing them?"),(0,i.kt)("p",null,"Selecting ",(0,i.kt)("inlineCode",{parentName:"p"},"y")," will delete the following files/folders in the plugin directory:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"myplugin-directory/\n\u251c\u2500\u2500 Dockerfile\n\u251c\u2500\u2500 docker-compose.yml\n\u251c\u2500\u2500 webpack/\n\u251c\u2500\u2500 .webpack/\n\u2514\u2500\u2500 .prettierrc\n")),(0,i.kt)("h3",{id:"would-you-like-to-update-the-following-dependencies-in-the-packagejson"},"Would you like to update the following dependencies in the package.json?"),(0,i.kt)("p",null,"Selecting ",(0,i.kt)("inlineCode",{parentName:"p"},"y")," will update all the npm dependencies listed by the prompt. The command purposely avoids updating ",(0,i.kt)("inlineCode",{parentName:"p"},"@grafana")," npm dependencies to reduce the friction with migration."),(0,i.kt)("h3",{id:"would-you-like-to-remove-the-following-possibly-unnecessary-npm-dependencies"},"Would you like to remove the following possibly unnecessary NPM dependencies?"),(0,i.kt)("p",null,"Selecting ",(0,i.kt)("inlineCode",{parentName:"p"},"y")," will delete the following npm dependencies found in ",(0,i.kt)("inlineCode",{parentName:"p"},"package.json"),":"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-diff",metastring:"json",json:!0},'{\n  "devDependencies": {\n-   "ts-loader": "*",\n-   "babel-loader": "*",\n-   "@grafana/toolkit": "*"\n  }\n}\n')),(0,i.kt)("h3",{id:"would-you-like-to-update-the-scripts-in-your-packagejson-all-scripts-using-grafana-toolkit-will-be-replaced"},"Would you like to update the scripts in your package.json? All scripts using grafana-toolkit will be replaced."),(0,i.kt)("p",null,"This step will update any npm scripts in the ",(0,i.kt)("inlineCode",{parentName:"p"},"package.json")," file to match the latest configurations. Any scripts that were previously using ",(0,i.kt)("inlineCode",{parentName:"p"},"grafana-toolkit")," will be replaced."),(0,i.kt)("h2",{id:"next-steps"},"Next steps"),(0,i.kt)("p",null,"When the migration command finishes running, look at the changes introduced and then running ",(0,i.kt)("inlineCode",{parentName:"p"},"yarn install")," followed by each of the npm scripts inside ",(0,i.kt)("inlineCode",{parentName:"p"},"package.json")," to confirm the plugin can be built, tested, signed etc."),(0,i.kt)("p",null,"If the plugin had customizations to the toolkit configs (e.g. webpack) head over to the ",(0,i.kt)("a",{parentName:"p",href:"/plugin-tools/docs/advanced-configuration"},"advanced configuration guide")," to learn how to update them."),(0,i.kt)("p",null,"If the plugin can be built but there are problems with jest tests see the ",(0,i.kt)("a",{parentName:"p",href:"/plugin-tools/docs/advanced-configuration#esm-errors-with-jest"},"jest advanced configuration")," issue regarding es modules."),(0,i.kt)("p",null,"For help resolving other issues, reach out on ",(0,i.kt)("a",{parentName:"p",href:"https://grafana.slack.com/"},"slack")," or the ",(0,i.kt)("a",{parentName:"p",href:"https://community.grafana.com/c/plugin-development/30"},"community forum"),"."))}d.isMDXComponent=!0}}]);